@model net_shop_core.Models.StoresModel

@{
    ViewData["Parent-0"] = "Account";
    ViewData["Parent-1"] = "ManageStores";
    ViewData["Title"] = "New Store";
}

<!-- Account Style CSS -->
@await Html.PartialAsync("~/Views/Shared/AccountLayout/_AccountStyle.cshtml")

<script>
    $(document).ready(function () {

        window.setInterval(function () {
            // calls function every second
            setLocation();
        }, 3000);

        function setLocation() {
            $('#gmap_canvas').on('load', function () {
                var link = $(this).contents().find(".google-maps-link a").prop('href');
                if (link != "" && link.indexOf("https://maps.google.com/maps") >= 0) {
                    //set location map value in text area
                    $("#StoreLocationMap").val(link);
                    alert(link);
                }
                else {
                    alert(link);
                }
            });
        }

        function testFunction() {
            alert("Test!");
        }
    });
</script>

<div class="d-flex" id="wrapper">
    <!-- Sidebar -->
    @await Html.PartialAsync("~/Views/Shared/AccountLayout/_LeftSideBar.cshtml")
    <!-- /#sidebar-wrapper -->
    <!-- Page Content -->
    <div id="page-content-wrapper">

        <!-- //Top menu item -->
        @await Html.PartialAsync("~/Views/Shared/AccountLayout/_NavBarTop.cshtml")


        <div class="container-fluid">
            <h1 class="mt-4">
                Create New Store
            </h1>

            <!-- //Breadcrump -->
            @await Html.PartialAsync("~/Views/Shared/_BreadCrumb.cshtml")

            <!--row-->
            <div class="row justify-content-center mb-4">
                <div class="col-12">
                    <form asp-controller="Account" asp-action="NewStore" id="newStoreForm" method="post">
                        <div asp-validation-summary="All" class="text-danger"></div>
                        <div class="row jumbotron border border-dark m-2">
                            <div class="col-sm-6 form-group">
                                <label asp-for="StoreName" class="font-weight-bold h5"></label>
                                <input asp-for="StoreName" class="form-control" required>
                                <span asp-validation-for="StoreName" class="text-danger"></span>
                            </div>
                            <div class="col-sm-6 form-group">
                                <label asp-for="StoreDescription" class="font-weight-bold h5"></label>
                                <input asp-for="StoreDescription" class="form-control" required>
                                <span asp-validation-for="StoreDescription" class="text-danger"></span>
                            </div>
                            <div class="col-sm-6 form-group">
                                <label asp-for="StoreLocation" class="font-weight-bold h5"></label>
                                <input asp-for="StoreLocation" class="form-control" required>
                                <span asp-validation-for="StoreLocation" class="text-danger"></span>
                            </div>
                            <div class="col-sm-4 form-group">
                                <label asp-for="StoreLocationMap" class="font-weight-bold h5"></label>
                                <textarea asp-for="StoreLocationMap" class="form-control"></textarea>
                                <span asp-validation-for="StoreLocationMap" class="text-danger"></span>
                            </div>
                            <div class="col-sm-2 form-group">
                                <label>Demo</label>
                                <a href="#addLocationModal" data-toggle="modal" data-target="#addLocationModal" class="btn btn-info">Show sample</a>
                            </div>
                            <div class="col-sm-12 form-group">
                                <div class="row">
                                    <div class="mapouter">
                                        <div class="gmap_canvas"><iframe style="width:100%" height="360" id="gmap_canvas" src="https://maps.google.com/maps?q=Brusubi%20Phase%202&t=&z=13&ie=UTF8&iwloc=&output=embed" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"></iframe><a href="https://www.embedgooglemap.net"></a></div>
                                        <style>
                                            .mapouter {
                                                position: relative;
                                                text-align: right;
                                                height: 360px;
                                                width: 100%;
                                            }

                                            .gmap_canvas {
                                                overflow: hidden;
                                                background: none !important;
                                                height: 360px;
                                                width: 100%;
                                            }
                                        </style>
                                    </div>
                                </div>
                            </div>

                            <div class="col-sm-12 form-group">
                                <div class="row">
                                    <div class="col-3 offset-9">
                                        <a href="~/Account/ManageStores" class="btn btn-danger m-3">
                                            <i class="fas fa-chevron-left"></i> Cancel
                                        </a>
                                        <button type="submit" class="btn btn-primary">
                                            <i class="far fa-paper-plane"></i> Submit
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </form>
                </div>
            </div>
            <!--/row-->
        </div>

    </div>

    <script>
        $("#newStoreForm").validate();
    </script>

</div>




<!-- Account Modals -->
@await Html.PartialAsync("~/Views/Shared/AccountLayout/_AccountModals.cshtml")